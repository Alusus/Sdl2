اشمل "مـتم/طـرفية.أسس"؛
اشمل "مـتم/نـظام.أسس"؛
اشمل "مـتم/نـم.أسس"؛
اشمل "../طـوب.أسس"؛

@تصدير[exit] دالة اخرج (حالة: صحيح);

إذا طـوب.هيئ(طـوب._تهيئة_عصا_التحكم_) != 0 {
  مـتم.طـرفية.اطبع("فشلت تهئية مكتبة ط.و.ب.\ج")؛
  اخرج(1)؛
}؛

مـتم.طـرفية.اطبع("اختبار 1\ج")؛

إذا طـوب.صـورة.هيئ(طـوب.صـورة._تهيئة_بنج_) != طـوب.صـورة._تهيئة_بنج_ {
  مـتم.طـرفية.اطبع("فشلت تهيئة مكتبة صورة ط.و.ب\ج")؛
  اخرج(1)؛
}؛

مـتم.طـرفية.اطبع("اختبار 2\ج")؛

عرف نافذة: مؤشر[طـوب.نـافذة] = طـوب.نـافذة.أنشئ("مطق النار"، 0، 0، 1280، 720، 0)؛
إذا نافذة == 0 {
  مـتم.طـرفية.اطبع("فشل إنشاء النافذة\ج")؛
  اخرج(1)؛
}؛

مـتم.طـرفية.اطبع("اختبار 3\ج")؛

طـوب.عين_تلميح(طـوب.تـلميحات._رسوم_جودة_التحجيم_، "linear")؛

عرف رسام: مؤشر[طـوب.رسـام] = طـوب.رسـام.أنشئ(نافذة، -1، طـوب.رسـام.عـلامات._مسرع_)؛
إذا رسام == 0 {
  مـتم.طـرفية.اطبع("فشل إنشاء الرسام\ج")؛
  اخرج(1)؛
}؛

مـتم.طـرفية.اطبع("اختبار 4\ج")؛

عرف نقش: مؤشر[طـوب.نـقش] = طـوب.صـورة.حمل_نقش(رسام، "player.png")؛

دالة اطمغ (نقش: مؤشر[طـوب.نـقش]، س: صحيح، ص: صحيح)
{
  عرف مستطيل: طـوب.مـستطيل؛
  مستطيل.س = س؛
  مستطيل.ص = ص؛
  طـوب.نـقش.استفهم(نقش، 0، 0، مستطيل.ع~مؤشر، مستطيل.ط~مؤشر)؛
  طـوب.رسـام.انسخ(رسام، نقش، 0، مستطيل~مؤشر)؛
}؛

عرف س: صحيح = 0؛
عرف م: صحيح؛

مـتم.طـرفية.اطبع("اختبار 5\ج")؛

بينما 1 {
  طـوب.رسـام.عين_لون_الرسم(رسام، 96، 128، 255، 255)؛
  طـوب.رسـام.نظف(رسام)؛
  
  لكل م = 0، م < 10، ++م {
    اطمغ(نقش، س + م * 10، 100 + م * 50)؛
  }؛
  إذا ++س >= 1000 س = 0؛
  
  عرف حدث: طـوب.حـدث؛
  بينما طـوب.استشعر_حدث(حدث~مؤشر) != 0 {
    إذا حدث.نوع == طـوب.حـدث._خروج_ اخرج(0)؛
  }؛
  
  طـوب.رسـام.اعرض(رسام)؛

  مـتم.نـظام.نم(1000)؛
};

